// База вопросов для теста IQ
const questionBank = {
    easy: [
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Какое число следующее: 2, 4, 6, 8, ?',
            answers: ['9', '10', '11', '12'],
            correct: 1,
            explanation: 'Каждое число увеличивается на 2.'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Продолжите: 1, 3, 5, 7, ?',
            answers: ['8', '9', '10', '11'],
            correct: 1,
            explanation: 'Нечетные числа по порядку.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 5 + 7?',
            answers: ['11', '12', '13', '14'],
            correct: 1,
            explanation: '5 + 7 = 12'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 10 × 3?',
            answers: ['30', '33', '27', '40'],
            correct: 0,
            explanation: '10 × 3 = 30'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Все кошки - животные. Мурка - кошка. Значит:',
            answers: ['Мурка - животное', 'Мурка не животное', 'Нельзя определить', 'Все животные - кошки'],
            correct: 0,
            explanation: 'Если все кошки - животные, и Мурка - кошка, то Мурка - животное.'
        },
        {
            type: 'verbal',
            category: 'Вербальные',
            question: 'Какое слово лишнее: яблоко, груша, банан, морковь?',
            answers: ['яблоко', 'груша', 'банан', 'морковь'],
            correct: 3,
            explanation: 'Морковь - это овощ, остальные - фрукты.'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Сколько углов у квадрата?',
            answers: ['3', '4', '5', '6'],
            correct: 1,
            explanation: 'Квадрат имеет 4 угла.'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'День относится к ночи, как свет к:',
            answers: ['лампе', 'темноте', 'солнцу', 'окну'],
            correct: 1,
            explanation: 'День и ночь - противоположности, как свет и темнота.'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 2, 4, 8, 16, ?',
            answers: ['20', '24', '32', '28'],
            correct: 2,
            explanation: 'Каждое число умножается на 2.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 20 - 8?',
            answers: ['10', '11', '12', '13'],
            correct: 2,
            explanation: '20 - 8 = 12'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Продолжите: 10, 20, 30, 40, ?',
            answers: ['45', '50', '55', '60'],
            correct: 1,
            explanation: 'Каждое число увеличивается на 10.'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если сегодня понедельник, то завтра будет:',
            answers: ['воскресенье', 'вторник', 'среда', 'понедельник'],
            correct: 1,
            explanation: 'После понедельника идет вторник.'
        },
        {
            type: 'verbal',
            category: 'Вербальные',
            question: 'Найдите общее слово: стол, стул, диван',
            answers: ['мебель', 'дерево', 'комната', 'дом'],
            correct: 0,
            explanation: 'Все это предметы мебели.'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Сколько сторон у треугольника?',
            answers: ['2', '3', '4', '5'],
            correct: 1,
            explanation: 'Треугольник имеет 3 стороны.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 6 × 4?',
            answers: ['20', '22', '24', '26'],
            correct: 2,
            explanation: '6 × 4 = 24'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'Рыба относится к воде, как птица к:',
            answers: ['гнезду', 'воздуху', 'небу', 'крыльям'],
            correct: 1,
            explanation: 'Рыба живет в воде, птица летает в воздухе.'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите следующее: 1, 4, 9, 16, ?',
            answers: ['20', '25', '24', '30'],
            correct: 1,
            explanation: 'Это квадраты чисел: 1², 2², 3², 4², 5² = 25'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если все цветы красивые, и роза - цветок, то:',
            answers: ['роза красивая', 'роза не красивая', 'нельзя определить', 'цветы не красивые'],
            correct: 0,
            explanation: 'Если все цветы красивые, и роза - цветок, то роза красивая.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 15 + 25?',
            answers: ['38', '40', '42', '45'],
            correct: 1,
            explanation: '15 + 25 = 40'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Продолжите: 5, 10, 15, 20, ?',
            answers: ['22', '25', '28', '30'],
            correct: 1,
            explanation: 'Каждое число увеличивается на 5.'
        }
    ],
    medium: [
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Какое число следующее: 2, 4, 8, 16, ?',
            answers: ['24', '32', '28', '30'],
            correct: 1,
            explanation: 'Каждое число умножается на 2.'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Продолжите последовательность: 1, 4, 9, 16, 25, ?',
            answers: ['30', '36', '40', '35'],
            correct: 1,
            explanation: 'Это квадраты чисел: 1², 2², 3², 4², 5², 6² = 36'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Если 5 яблок стоят 100 рублей, сколько стоят 8 яблок?',
            answers: ['140 рублей', '160 рублей', '150 рублей', '180 рублей'],
            correct: 1,
            explanation: 'Одно яблоко стоит 100/5 = 20 рублей. 8 яблок стоят 8 × 20 = 160 рублей.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'В классе 30 учеников. 60% из них девочки. Сколько мальчиков в классе?',
            answers: ['10', '12', '15', '18'],
            correct: 1,
            explanation: '60% девочек = 18. Мальчиков = 30 - 18 = 12.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Если книга стоит 450 рублей со скидкой 25%, какова была её первоначальная цена?',
            answers: ['550 рублей', '600 рублей', '575 рублей', '625 рублей'],
            correct: 1,
            explanation: '450 рублей = 75% от первоначальной цены. Первоначальная цена = 450 / 0.75 = 600 рублей.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 15% от 200?',
            answers: ['25', '30', '35', '40'],
            correct: 1,
            explanation: '15% от 200 = 0.15 × 200 = 30'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Все розы - цветы. Некоторые цветы красные. Значит:',
            answers: ['Все розы красные', 'Некоторые розы могут быть красными', 'Розы не могут быть красными', 'Все красные - розы'],
            correct: 1,
            explanation: 'Из того, что некоторые цветы красные, не следует, что все розы красные.'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если все коты - животные, и все животные дышат, то:',
            answers: ['Все коты дышат', 'Некоторые коты не дышат', 'Коты не животные', 'Животные не коты'],
            correct: 0,
            explanation: 'Если все коты - животные, и все животные дышат, то все коты дышат.'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Верно ли утверждение: "Если идет дождь, то на улице мокро. На улице мокро. Значит, идет дождь"?',
            answers: ['Верно', 'Неверно', 'Нельзя определить', 'Частично верно'],
            correct: 1,
            explanation: 'Это логическая ошибка. Из "если А, то Б" и "Б" не следует "А".'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если A больше B, а B больше C, то:',
            answers: ['A больше C', 'C больше A', 'A равно C', 'Нельзя определить'],
            correct: 0,
            explanation: 'Если A > B и B > C, то A > C (транзитивность).'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Какая фигура получится, если сложить квадрат пополам дважды?',
            answers: ['Треугольник', 'Прямоугольник', 'Квадрат меньшего размера', 'Ромб'],
            correct: 2,
            explanation: 'При складывании квадрата пополам дважды получается квадрат меньшего размера.'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Если вы смотрите на куб сверху и видите 4 грани, сколько граней вы не видите?',
            answers: ['1', '2', '3', '4'],
            correct: 1,
            explanation: 'У куба 6 граней. Если видно 4 сверху, то не видно 2 снизу.'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Сколько углов у правильного шестиугольника?',
            answers: ['5', '6', '7', '8'],
            correct: 1,
            explanation: 'Шестиугольник имеет 6 углов.'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'Книга относится к библиотеке, как картина к:',
            answers: ['Художнику', 'Музею', 'Краске', 'Раме'],
            correct: 1,
            explanation: 'Книга хранится в библиотеке, картина хранится в музее.'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'День относится к ночи, как свет к:',
            answers: ['Лампе', 'Темноте', 'Солнцу', 'Окну'],
            correct: 1,
            explanation: 'День и ночь - противоположности, как свет и темнота.'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'Учитель относится к ученику, как врач к:',
            answers: ['Больнице', 'Пациенту', 'Лекарству', 'Инструменту'],
            correct: 1,
            explanation: 'Учитель учит ученика, врач лечит пациента.'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'Рыба относится к воде, как птица к:',
            answers: ['Гнезду', 'Воздуху', 'Небу', 'Крыльям'],
            correct: 1,
            explanation: 'Рыба живет в воде, птица летает в воздухе.'
        },
        {
            type: 'verbal',
            category: 'Вербальные',
            question: 'Какое слово лишнее: стол, стул, диван, книга?',
            answers: ['стол', 'стул', 'диван', 'книга'],
            correct: 3,
            explanation: 'Стол, стул и диван - это мебель, книга - нет.'
        },
        {
            type: 'verbal',
            category: 'Вербальные',
            question: 'Найдите общее слово для: яблоко, груша, банан',
            answers: ['Овощ', 'Фрукт', 'Ягода', 'Дерево'],
            correct: 1,
            explanation: 'Все это фрукты.'
        },
        {
            type: 'verbal',
            category: 'Вербальные',
            question: 'Какое слово не относится к остальным: река, озеро, море, гора?',
            answers: ['река', 'озеро', 'море', 'гора'],
            correct: 3,
            explanation: 'Река, озеро и море - это водоемы, гора - нет.'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 1, 3, 6, 10, 15, ?',
            answers: ['18', '20', '21', '22'],
            correct: 2,
            explanation: 'Разница между числами увеличивается: +2, +3, +4, +5, +6. 15 + 6 = 21'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Какое число следующее: 7, 14, 21, 28, ?',
            answers: ['32', '35', '36', '42'],
            correct: 1,
            explanation: 'Каждое число увеличивается на 7. 28 + 7 = 35'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Продолжите ряд: 2, 6, 12, 20, 30, ?',
            answers: ['38', '40', '42', '44'],
            correct: 2,
            explanation: 'Разница: +4, +6, +8, +10, +12. 30 + 12 = 42'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если сегодня среда, то через 5 дней будет:',
            answers: ['Понедельник', 'Вторник', 'Среда', 'Четверг'],
            correct: 0,
            explanation: 'Среда + 5 дней = понедельник следующей недели.'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'В семье 5 детей. Каждый ребенок на 2 года старше предыдущего. Если младшему 5 лет, сколько лет старшему?',
            answers: ['11', '13', '15', '17'],
            correct: 1,
            explanation: 'Возрасты: 5, 7, 9, 11, 13. Старшему 13 лет.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько минут в 2.5 часах?',
            answers: ['120', '130', '150', '160'],
            correct: 2,
            explanation: '2.5 часа = 2.5 × 60 = 150 минут'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если половина числа равна 25, то само число равно:',
            answers: ['40', '45', '50', '55'],
            correct: 2,
            explanation: 'Если половина = 25, то число = 25 × 2 = 50'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Найдите следующее число: 1, 1, 2, 3, 5, 8, ?',
            answers: ['11', '12', '13', '14'],
            correct: 2,
            explanation: 'Числа Фибоначчи: каждое число = сумма двух предыдущих. 5 + 8 = 13'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если все студенты изучают математику, и Иван - студент, то:',
            answers: ['Иван изучает математику', 'Иван не изучает математику', 'Нельзя определить', 'Иван не студент'],
            correct: 0,
            explanation: 'Если все студенты изучают математику, и Иван - студент, то Иван изучает математику.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 25% от 80?',
            answers: ['15', '20', '25', '30'],
            correct: 1,
            explanation: '25% от 80 = 0.25 × 80 = 20'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 3, 9, 27, 81, ?',
            answers: ['162', '243', '324', '405'],
            correct: 1,
            explanation: 'Каждое число умножается на 3. 81 × 3 = 243'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Сколько граней у куба?',
            answers: ['4', '5', '6', '8'],
            correct: 2,
            explanation: 'Куб имеет 6 граней.'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'Солнце относится к дню, как луна к:',
            answers: ['ночи', 'звездам', 'небу', 'темноте'],
            correct: 0,
            explanation: 'Солнце светит днем, луна светит ночью.'
        },
        {
            type: 'verbal',
            category: 'Вербальные',
            question: 'Какое слово является синонимом слова "большой"?',
            answers: ['маленький', 'огромный', 'средний', 'крошечный'],
            correct: 1,
            explanation: '"Огромный" - синоним слова "большой".'
        }
    ],
    hard: [
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Найдите следующее число: 2, 6, 12, 20, 30, 42, ?',
            answers: ['54', '56', '58', '60'],
            correct: 1,
            explanation: 'Разница увеличивается: +4, +6, +8, +10, +12, +14. 42 + 14 = 56'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Если товар подорожал на 20%, а затем подешевел на 20%, то его цена:',
            answers: ['Осталась прежней', 'Увеличилась', 'Уменьшилась', 'Нельзя определить'],
            correct: 2,
            explanation: 'Если цена была 100, после подорожания 120, после удешевления 120 × 0.8 = 96. Цена уменьшилась.'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'В комнате 3 лампы и 3 выключателя. Вы можете включить выключатели только один раз. Как определить, какой выключатель к какой лампе?',
            answers: ['Невозможно', 'Включить один выключатель, подождать, выключить, включить другой', 'Включить все сразу', 'Включить два выключателя'],
            correct: 1,
            explanation: 'Включить один выключатель, подождать (лампа нагреется), выключить, включить другой. Теплая лампа соответствует первому выключателю.'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 1, 4, 9, 16, 25, 36, 49, ?',
            answers: ['60', '64', '72', '81'],
            correct: 1,
            explanation: 'Это квадраты чисел: 1², 2², 3², 4², 5², 6², 7², 8² = 64'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет (15 + 25) × 2 - 10?',
            answers: ['60', '70', '80', '90'],
            correct: 1,
            explanation: '(15 + 25) × 2 - 10 = 40 × 2 - 10 = 80 - 10 = 70'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если все A являются B, и некоторые B являются C, то:',
            answers: ['Все A являются C', 'Некоторые A могут быть C', 'Никакие A не являются C', 'Нельзя определить'],
            correct: 1,
            explanation: 'Если все A - B, и некоторые B - C, то некоторые A могут быть C.'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Найдите следующее: 1, 8, 27, 64, ?',
            answers: ['100', '125', '144', '216'],
            correct: 1,
            explanation: 'Это кубы чисел: 1³, 2³, 3³, 4³, 5³ = 125'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Если скорость автомобиля 60 км/ч, сколько времени нужно, чтобы проехать 180 км?',
            answers: ['2 часа', '3 часа', '4 часа', '5 часов'],
            correct: 1,
            explanation: 'Время = расстояние / скорость = 180 / 60 = 3 часа'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 2, 5, 11, 23, 47, ?',
            answers: ['89', '95', '101', '107'],
            correct: 1,
            explanation: 'Каждое число = предыдущее × 2 + 1. 47 × 2 + 1 = 95'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Если куб разрезать пополам по диагонали, сколько граней будет у каждой части?',
            answers: ['4', '5', '6', '7'],
            correct: 1,
            explanation: 'При разрезании куба по диагонали получается фигура с 5 гранями.'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'В группе из 30 человек 20 знают английский, 15 знают французский, 10 знают оба языка. Сколько человек не знают ни одного языка?',
            answers: ['0', '5', '10', '15'],
            correct: 1,
            explanation: 'Знают только английский: 20 - 10 = 10. Знают только французский: 15 - 10 = 5. Знают оба: 10. Итого знают языки: 10 + 5 + 10 = 25. Не знают: 30 - 25 = 5'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 33⅓% от 90?',
            answers: ['28', '30', '32', '35'],
            correct: 1,
            explanation: '33⅓% = 1/3. 1/3 от 90 = 30'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Найдите следующее: 1, 2, 4, 8, 16, 32, ?',
            answers: ['48', '64', '72', '96'],
            correct: 1,
            explanation: 'Каждое число умножается на 2. 32 × 2 = 64'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 0, 1, 1, 2, 3, 5, 8, 13, ?',
            answers: ['18', '20', '21', '24'],
            correct: 2,
            explanation: 'Числа Фибоначчи: каждое = сумма двух предыдущих. 8 + 13 = 21'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если все птицы летают, и пингвин - птица, но пингвин не летает, то:',
            answers: ['Утверждение неверно', 'Пингвин не птица', 'Все птицы не летают', 'Нельзя определить'],
            correct: 0,
            explanation: 'Утверждение "все птицы летают" неверно, так как пингвин - птица, но не летает.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Если цена товара увеличилась с 200 до 250 рублей, на сколько процентов она выросла?',
            answers: ['20%', '25%', '30%', '35%'],
            correct: 1,
            explanation: 'Увеличение = 250 - 200 = 50. Процент = (50 / 200) × 100 = 25%'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Сколько диагоналей у правильного восьмиугольника?',
            answers: ['16', '18', '20', '24'],
            correct: 2,
            explanation: 'У n-угольника диагоналей = n(n-3)/2. Для восьмиугольника: 8(8-3)/2 = 20'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'Слово относится к словарю, как нота к:',
            answers: ['музыке', 'нотному стану', 'песне', 'инструменту'],
            correct: 1,
            explanation: 'Слова хранятся в словаре, ноты записываются на нотном стане.'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 3, 7, 15, 31, 63, ?',
            answers: ['125', '127', '129', '131'],
            correct: 1,
            explanation: 'Каждое число = предыдущее × 2 + 1. 63 × 2 + 1 = 127'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если сегодня вторник, то через 100 дней будет:',
            answers: ['Вторник', 'Среда', 'Четверг', 'Пятница'],
            correct: 2,
            explanation: '100 дней = 14 недель + 2 дня. Вторник + 2 дня = четверг'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет √144?',
            answers: ['10', '11', '12', '13'],
            correct: 2,
            explanation: '√144 = 12, так как 12² = 144'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Найдите следующее: 1, 3, 7, 15, 31, ?',
            answers: ['60', '63', '65', '67'],
            correct: 1,
            explanation: 'Каждое число = предыдущее × 2 + 1. 31 × 2 + 1 = 63'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 2, 6, 18, 54, ?',
            answers: ['108', '162', '216', '324'],
            correct: 1,
            explanation: 'Каждое число умножается на 3. 54 × 3 = 162'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Сколько вершин у правильного додекаэдра?',
            answers: ['16', '18', '20', '24'],
            correct: 2,
            explanation: 'Додекаэдр имеет 20 вершин.'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если все студенты сдают экзамен, и Петр - студент, но Петр не сдал экзамен, то:',
            answers: ['Утверждение неверно', 'Петр не студент', 'Все студенты не сдают экзамен', 'Нельзя определить'],
            correct: 0,
            explanation: 'Утверждение "все студенты сдают экзамен" неверно.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 2³ × 3²?',
            answers: ['64', '72', '81', '96'],
            correct: 1,
            explanation: '2³ × 3² = 8 × 9 = 72'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'Атом относится к молекуле, как буква к:',
            answers: ['слову', 'алфавиту', 'предложению', 'тексту'],
            correct: 0,
            explanation: 'Атомы составляют молекулу, буквы составляют слово.'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 5, 10, 20, 40, 80, ?',
            answers: ['140', '160', '180', '200'],
            correct: 1,
            explanation: 'Каждое число умножается на 2. 80 × 2 = 160'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Найдите следующее: 1, 5, 13, 29, 61, ?',
            answers: ['115', '125', '135', '145'],
            correct: 1,
            explanation: 'Каждое число = предыдущее × 2 + 3. 61 × 2 + 3 = 125'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Если площадь квадрата 64 см², какова длина его стороны?',
            answers: ['6 см', '7 см', '8 см', '9 см'],
            correct: 2,
            explanation: 'Площадь квадрата = сторона². Сторона = √64 = 8 см'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'В коробке 12 шаров: 4 красных, 4 синих, 4 зеленых. Сколько шаров нужно вынуть, чтобы гарантированно получить 2 одного цвета?',
            answers: ['2', '3', '4', '5'],
            correct: 2,
            explanation: 'В худшем случае вынете по одному каждого цвета (3 шара), следующий обязательно будет совпадать с одним из них.'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Сколько ребер у правильного тетраэдра?',
            answers: ['4', '5', '6', '8'],
            correct: 2,
            explanation: 'Тетраэдр имеет 6 ребер.'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 1, 2, 6, 24, 120, ?',
            answers: ['600', '720', '840', '960'],
            correct: 1,
            explanation: 'Факториалы: 1! = 1, 2! = 2, 3! = 6, 4! = 24, 5! = 120, 6! = 720'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 15²?',
            answers: ['200', '225', '250', '275'],
            correct: 1,
            explanation: '15² = 15 × 15 = 225'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если все млекопитающие теплокровные, и дельфин - млекопитающее, то:',
            answers: ['Дельфин теплокровный', 'Дельфин не теплокровный', 'Нельзя определить', 'Млекопитающие не теплокровные'],
            correct: 0,
            explanation: 'Если все млекопитающие теплокровные, и дельфин - млекопитающее, то дельфин теплокровный.'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Найдите следующее: 2, 4, 12, 48, 240, ?',
            answers: ['1200', '1440', '1680', '1920'],
            correct: 1,
            explanation: 'Каждое число умножается на увеличивающееся число: ×2, ×3, ×4, ×5, ×6. 240 × 6 = 1440'
        },
        {
            type: 'analogy',
            category: 'Аналогии',
            question: 'Капля относится к океану, как песчинка к:',
            answers: ['пляжу', 'пустыне', 'морю', 'земле'],
            correct: 1,
            explanation: 'Капля - часть океана, песчинка - часть пустыни.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 40% от 150?',
            answers: ['50', '55', '60', '65'],
            correct: 2,
            explanation: '40% от 150 = 0.4 × 150 = 60'
        },
        {
            type: 'pattern',
            category: 'Паттерны',
            question: 'Найдите закономерность: 1, 4, 13, 40, 121, ?',
            answers: ['350', '364', '380', '400'],
            correct: 1,
            explanation: 'Каждое число = предыдущее × 3 + 1. 121 × 3 + 1 = 364'
        },
        {
            type: 'spatial',
            category: 'Пространственное',
            question: 'Сколько граней у правильного икосаэдра?',
            answers: ['18', '20', '22', '24'],
            correct: 1,
            explanation: 'Икосаэдр имеет 20 граней.'
        },
        {
            type: 'logic',
            category: 'Логика',
            question: 'Если все рыбы живут в воде, и кит живет в воде, то:',
            answers: ['Кит - рыба', 'Кит не рыба', 'Нельзя определить', 'Рыбы не живут в воде'],
            correct: 2,
            explanation: 'Из того, что кит живет в воде, не следует, что он рыба. Кит - млекопитающее.'
        },
        {
            type: 'math',
            category: 'Математика',
            question: 'Сколько будет 18 × 5?',
            answers: ['85', '90', '95', '100'],
            correct: 1,
            explanation: '18 × 5 = 90'
        },
        {
            type: 'sequence',
            category: 'Логика',
            question: 'Найдите следующее: 3, 9, 27, 81, 243, ?',
            answers: ['486', '729', '972', '1458'],
            correct: 1,
            explanation: 'Каждое число умножается на 3. 243 × 3 = 729'
        }
    ]
};

// Функция для получения вопросов по уровню сложности
function getQuestions(difficulty) {
    return questionBank[difficulty] || questionBank.medium;
}

// Функция для перемешивания массива (Fisher-Yates)
function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}

// Функция для получения случайных вопросов
function getRandomQuestions(difficulty, count) {
    const allQuestions = getQuestions(difficulty);
    const shuffled = shuffleArray(allQuestions);
    return shuffled.slice(0, count);
}
